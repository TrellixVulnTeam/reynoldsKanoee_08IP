!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.moltin={})}(this,function(t){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}!function(t){if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(t){return t&&DataView.prototype.isPrototypeOf(t)},o=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};l.prototype.append=function(t,e){t=a(t),e=u(e);var r=this.map[t];this.map[t]=r?r+","+e:e},l.prototype.delete=function(t){delete this.map[a(t)]},l.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},l.prototype.set=function(t,e){this.map[a(t)]=u(e)},l.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},l.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),c(t)},l.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},l.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),c(t)},e.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];g.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.Headers=l,t.Request=v,t.Response=g,t.fetch=function(t,r){return new Promise(function(n,o){var i=new v(t,r),s=new XMLHttpRequest;s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new l,t.split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;n(new g(o,r))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&e.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r}function l(t){this.map={},t instanceof l?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function f(t){var e=new FileReader,r=h(e);return e.readAsArrayBuffer(t),r}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&n(t))this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!o(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t,e,r,n=p(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=h(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function v(t,e){var r,n,o=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),i.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function m(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function g(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}}(self);var n,o,i="undefined"!=typeof self&&self||e,s=(i.fetch.bind(i),function(t,n){t.exports=function(){function t(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,i=void 0,s=void 0,a=function(t,e){d[o]=t,d[o+1]=e,2===(o+=2)&&(s?s(y):w())},u="undefined"!=typeof window?window:void 0,c=u||{},l=c.MutationObserver||c.WebKitMutationObserver,p="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(y,1)}}var d=new Array(1e3);function y(){for(var t=0;t<o;t+=2){var e=d[t],r=d[t+1];e(r),d[t]=void 0,d[t+1]=void 0}o=0}var v,m,g,b,w=void 0;function _(t,e){var r=this,n=new this.constructor(T);void 0===n[E]&&G(n);var o=r._state;if(o){var i=arguments[o-1];a(function(){return D(o,n,i,r._result)})}else R(r,n,t,e);return n}function $(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(T);return C(e,t),e}p?w=function(){return process.nextTick(y)}:l?(m=0,g=new l(y),b=document.createTextNode(""),g.observe(b,{characterData:!0}),w=function(){b.data=m=++m%2}):h?((v=new MessageChannel).port1.onmessage=y,w=function(){return v.port2.postMessage(0)}):w=void 0===u?function(){try{var t=r,e=t("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(y)}:f()}catch(t){return f()}}():f();var E=Math.random().toString(36).substring(16);function T(){}var A=void 0,O=1,x=2,j=new L;function P(t){try{return t.then}catch(t){return j.error=t,j}}function U(e,r,n){var o,i,s,u;r.constructor===e.constructor&&n===_&&r.constructor.resolve===$?(s=e,(u=r)._state===O?S(s,u._result):u._state===x?q(s,u._result):R(u,void 0,function(t){return C(s,t)},function(t){return q(s,t)})):n===j?(q(e,j.error),j.error=null):void 0===n?S(e,r):t(n)?(o=r,i=n,a(function(t){var e=!1,r=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(i,o,function(r){e||(e=!0,o!==r?C(t,r):S(t,r))},function(r){e||(e=!0,q(t,r))},t._label);!e&&r&&(e=!0,q(t,r))},e)):S(e,r)}function C(t,e){var r,n;t===e?q(t,new TypeError("You cannot resolve a promise with itself")):(n=typeof(r=e),null===r||"object"!==n&&"function"!==n?S(t,e):U(t,e,P(e)))}function I(t){t._onerror&&t._onerror(t._result),k(t)}function S(t,e){t._state===A&&(t._result=e,t._state=O,0!==t._subscribers.length&&a(k,t))}function q(t,e){t._state===A&&(t._state=x,t._result=e,a(I,t))}function R(t,e,r,n){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+O]=r,o[i+x]=n,0===i&&t._state&&a(k,t)}function k(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)n=e[s],o=e[s+r],n?D(r,n,o,i):o(i);t._subscribers.length=0}}function L(){this.error=null}var B=new L;function D(e,r,n,o){var i=t(n),s=void 0,a=void 0,u=void 0,c=void 0;if(i){if((s=function(t,e){try{return t(e)}catch(t){return B.error=t,B}}(n,o))===B?(c=!0,a=s.error,s.error=null):u=!0,r===s)return void q(r,new TypeError("A promises callback cannot return that same promise."))}else s=o,u=!0;r._state!==A||(i&&u?C(r,s):c?q(r,a):e===O?S(r,s):e===x&&q(r,s))}var N=0;function G(t){t[E]=N++,t._state=void 0,t._result=void 0,t._subscribers=[]}var F=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(T),this.promise[E]||G(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):q(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===A&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===$){var o=P(t);if(o===_&&t._state!==A)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===M){var i=new r(T);U(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===A&&(this._remaining--,t===x?q(n,r):this._result[e]=r),0===this._remaining&&S(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;R(t,void 0,function(t){return r._settledAt(O,e,t)},function(t){return r._settledAt(x,e,t)})},t}(),M=function(){function t(e){this[E]=N++,this._result=this._state=void 0,this._subscribers=[],T!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){C(t,e)},function(e){q(t,e)})}catch(e){q(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){throw r})})},t}();return M.prototype.then=_,M.all=function(t){return new F(this,t).promise},M.race=function(t){var e=this;return n(t)?new e(function(r,n){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(r,n)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},M.resolve=$,M.reject=function(t){var e=new this(T);return q(e,t),e},M._setScheduler=function(t){s=t},M._setAsap=function(t){a=t},M._asap=a,M.polyfill=function(){var t=void 0;if(void 0!==e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;if(r){var n=null;try{n=Object.prototype.toString.call(r.resolve())}catch(t){}if("[object Promise]"===n&&!r.cast)return}t.Promise=M},M.Promise=M,M}()}(n={exports:{}},n.exports),function(){if("undefined"==typeof localStorage||null===localStorage){var t=require("node-localstorage").LocalStorage;this.localStorage=new t("./localStorage")}else this.localStorage=window.localStorage});s.prototype.set=function(t,e){return this.localStorage.setItem(t,e)},s.prototype.get=function(t){return this.localStorage.getItem(t)},s.prototype.delete=function(t){return this.localStorage.removeItem(t)};var a=e.crypto||e.msCrypto;if(a&&a.getRandomValues){var u=new Uint8Array(16);o=function(){return a.getRandomValues(u),u}}if(!o){var c=new Array(16);o=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),c[e]=t>>>((3&e)<<3)&255;return c}}for(var l=o,p=[],h=0;h<256;++h)p[h]=(h+256).toString(16).substr(1);var f=function(t,e){var r=e||0,n=p;return n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]};var d=function(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||l)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;++i)e[n+i]=o[i];return e||f(o)};function y(t,e){var r=[];return null===e||0===e.length?[]:"string"==typeof e?[{type:t,id:e}]:(Array.isArray(e)&&(r=e.map(function(e){return{type:t,id:e}})),r)}function v(t){return 204===t.status?new Promise(function(e){e({status:t.status,ok:t.ok,json:"{}"})}):new Promise(function(e){return t.json().then(function(r){return e({status:t.status,ok:t.ok,json:r})})})}function m(t,e){return"limit"===t||"offset"===t?"page"+e:"filter"===t?t+"="+Object.keys(e).map(function(t){return r=t,n=e[t],Object.keys(n).map(function(t){var e=n[t];return r+"("+t+","+e+")"}).join(":");var r,n}).join(":"):t+"="+e}function g(t,e){var r,n,o,i,s,a,u;return e.includes||e.sort||e.limit||e.offset||e.filter?t+"?"+(n=(r=e).includes,o=r.sort,i=r.limit,s=r.offset,a=r.filter,u={},n&&(u.include=n),o&&(u.sort="("+o+")"),i&&(u.limit="[limit]="+i),s&&(u.offset="[offset]="+s),a&&(u.filter=a),Object.keys(u).map(function(t){return m(t,u[t])}).join("&")):t}function b(t,e,r){void 0===e&&(e=null),void 0===r&&(r="cart_item");var n={type:r};return"cart_item"===r&&Object.assign(n,{id:t,quantity:parseInt(e,10)}),"promotion_item"===r&&Object.assign(n,{code:t}),n}var w=function(t){this.config=t,this.storage=new s};w.prototype.authenticate=function(){var t=this.config,e=this.storage;if(!t.client_id)throw new Error("You must have a client_id set");if(!t.host)throw new Error("You have not specified an API host");var r={grant_type:t.client_secret?"client_credentials":"implicit",client_id:t.client_id};t.client_secret&&(r.client_secret=t.client_secret);var n=new Promise(function(e,n){fetch(t.protocol+"://"+t.host+"/"+t.auth.uri,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.keys(r).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(r[t])}).join("&")}).then(v).then(function(t){t.ok&&e(t.json),n(t.json)}).catch(function(t){return n(t)})});return n.then(function(t){e.set("mtoken",t.access_token),e.set("mexpires",t.expires)}),n},w.prototype.send=function(t,e,r,n){var o=this;void 0===r&&(r=void 0),void 0===n&&(n=void 0);var i=this.config,s=this.storage;return new Promise(function(a,u){var c=function(){var o,c,l={Authorization:"Bearer: "+s.get("mtoken"),"Content-Type":"application/json","X-MOLTIN-SDK-LANGUAGE":i.sdk.language,"X-MOLTIN-SDK-VERSION":i.sdk.version};i.application&&(l["X-MOLTIN-APPLICATION"]=i.application),i.currency&&(l["X-MOLTIN-CURRENCY"]=i.currency),n&&(l["X-MOLTIN-CUSTOMER-TOKEN"]=n),fetch(i.protocol+"://"+i.host+"/"+i.version+"/"+t,{method:e.toUpperCase(),headers:l,body:(o=r,o&&(c='{\n      "data": '+JSON.stringify(o)+"\n    }"),c)}).then(v).then(function(t){t.ok&&a(t.json),u(t.json)}).catch(function(t){return u(t)})};return!s.get("mtoken")||Date.now().toString()>=s.get("mexpires")?o.authenticate().then(c).catch(function(t){return u(t)}):c()})};var _=Object.prototype.toString;var $=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},E=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function T(t){return t.split("").map(function(t){return"(?:"+t.toUpperCase()+"|"+t.toLowerCase()+")"}).join("")}function A(t,e){for(var r=t.length-1;r>=0;r--)t[r]===e&&Array.prototype.splice.call(t,r,1)}var O={},x=function(){function t(){$(this,t),this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],this.acronyms={},this.acronymRegex=/(?=a)b/}return E(t,null,[{key:"getInstance",value:function(e){return O[e]=O[e]||new t,O[e]}}]),E(t,[{key:"acronym",value:function(t){this.acronyms[t.toLowerCase()]=t;var e,r,n=[];for(var o in this.acronyms)e=this.acronyms,r=o,Object.prototype.hasOwnProperty.call(e,r)&&n.push(this.acronyms[o]);this.acronymRegex=new RegExp(n.join("|"))}},{key:"plural",value:function(t,e){"string"==typeof t&&A(this.uncountables,t),A(this.uncountables,e),this.plurals.unshift([t,e])}},{key:"singular",value:function(t,e){"string"==typeof t&&A(this.uncountables,t),A(this.uncountables,e),this.singulars.unshift([t,e])}},{key:"irregular",value:function(t,e){A(this.uncountables,t),A(this.uncountables,e);var r=t[0],n=t.substr(1),o=e[0],i=e.substr(1);if(r.toUpperCase()===o.toUpperCase())this.plural(new RegExp("("+r+")"+n+"$","i"),"$1"+i),this.plural(new RegExp("("+o+")"+i+"$","i"),"$1"+i),this.singular(new RegExp("("+r+")"+n+"$","i"),"$1"+n),this.singular(new RegExp("("+o+")"+i+"$","i"),"$1"+n);else{var s=T(n),a=T(i);this.plural(new RegExp(r.toUpperCase()+s+"$"),o.toUpperCase()+i),this.plural(new RegExp(r.toLowerCase()+s+"$"),o.toLowerCase()+i),this.plural(new RegExp(o.toUpperCase()+a+"$"),o.toUpperCase()+i),this.plural(new RegExp(o.toLowerCase()+a+"$"),o.toLowerCase()+i),this.singular(new RegExp(r.toUpperCase()+s+"$"),r.toUpperCase()+n),this.singular(new RegExp(r.toLowerCase()+s+"$"),r.toLowerCase()+n),this.singular(new RegExp(o.toUpperCase()+a+"$"),r.toUpperCase()+n),this.singular(new RegExp(o.toLowerCase()+a+"$"),r.toLowerCase()+n)}}},{key:"uncountable",value:function(){for(var t=arguments,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=t[n];this.uncountables=this.uncountables.concat(r)}},{key:"human",value:function(t,e){this.humans.unshift([t,e])}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";"all"===t?(this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[]):this[t]=[]}}]),t}();var j={en:function(t){t.plural(/$/,"s"),t.plural(/s$/i,"s"),t.plural(/^(ax|test)is$/i,"$1es"),t.plural(/(octop|vir)us$/i,"$1i"),t.plural(/(octop|vir)i$/i,"$1i"),t.plural(/(alias|status)$/i,"$1es"),t.plural(/(bu)s$/i,"$1ses"),t.plural(/(buffal|tomat)o$/i,"$1oes"),t.plural(/([ti])um$/i,"$1a"),t.plural(/([ti])a$/i,"$1a"),t.plural(/sis$/i,"ses"),t.plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),t.plural(/(hive)$/i,"$1s"),t.plural(/([^aeiouy]|qu)y$/i,"$1ies"),t.plural(/(x|ch|ss|sh)$/i,"$1es"),t.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),t.plural(/^(m|l)ouse$/i,"$1ice"),t.plural(/^(m|l)ice$/i,"$1ice"),t.plural(/^(ox)$/i,"$1en"),t.plural(/^(oxen)$/i,"$1"),t.plural(/(quiz)$/i,"$1zes"),t.singular(/s$/i,""),t.singular(/(ss)$/i,"$1"),t.singular(/(n)ews$/i,"$1ews"),t.singular(/([ti])a$/i,"$1um"),t.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"),t.singular(/(^analy)(sis|ses)$/i,"$1sis"),t.singular(/([^f])ves$/i,"$1fe"),t.singular(/(hive)s$/i,"$1"),t.singular(/(tive)s$/i,"$1"),t.singular(/([lr])ves$/i,"$1f"),t.singular(/([^aeiouy]|qu)ies$/i,"$1y"),t.singular(/(s)eries$/i,"$1eries"),t.singular(/(m)ovies$/i,"$1ovie"),t.singular(/(x|ch|ss|sh)es$/i,"$1"),t.singular(/^(m|l)ice$/i,"$1ouse"),t.singular(/(bus)(es)?$/i,"$1"),t.singular(/(o)es$/i,"$1"),t.singular(/(shoe)s$/i,"$1"),t.singular(/(cris|test)(is|es)$/i,"$1is"),t.singular(/^(a)x[ie]s$/i,"$1xis"),t.singular(/(octop|vir)(us|i)$/i,"$1us"),t.singular(/(alias|status)(es)?$/i,"$1"),t.singular(/^(ox)en/i,"$1"),t.singular(/(vert|ind)ices$/i,"$1ex"),t.singular(/(matr)ices$/i,"$1ix"),t.singular(/(quiz)zes$/i,"$1"),t.singular(/(database)s$/i,"$1"),t.irregular("person","people"),t.irregular("man","men"),t.irregular("child","children"),t.irregular("sex","sexes"),t.irregular("move","moves"),t.irregular("zombie","zombies"),t.uncountable("equipment","information","rice","money","species","series","fish","sheep","jeans","police")}};function P(t,e){var r;if(r=t,"[object Function]"===_.call(r)&&(e=t,t=null),t=t||"en",!e)return x.getInstance(t);e(x.getInstance(t))}for(var U in j)P(U,j[U]);function C(t){return function(t,e){var r,n,o,i=""+t;if(0===i.length)return i;var s=i.toLowerCase().match(/\b\w+$/);if(s&&P().uncountables.indexOf(s[0])>-1)return i;for(var a=0,u=e.length;a<u;a++)if(n=(r=e[a])[0],o=r[1],i.match(n)){i=i.replace(n,o);break}return i}(t,P(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en").plurals)}var I={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","×":"x","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"Th","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","ĝ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"'n","Ŋ":"NG","ŋ":"ng","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z"},S={},q=(function(){function t(){$(this,t),this.approximations={};for(var e in I)this.approximate(e,I[e])}E(t,null,[{key:"getInstance",value:function(e){return S[e]=S[e]||new t,S[e]}}]),E(t,[{key:"approximate",value:function(t,e){this.approximations[t]=e}},{key:"transliterate",value:function(t,e){var r=this;return t.replace(/[^\u0000-\u007f]/g,function(t){return r.approximations[t]||e||"?"})}}])}(),function(t){this.request=new w(t),this.config=t});q.prototype.All=function(t){void 0===t&&(t=null);var e=this.includes,r=this.sort,n=this.limit,o=this.offset,i=this.filter;return this.call=this.request.send(g(this.endpoint,{includes:e,sort:r,limit:n,offset:o,filter:i}),"GET",void 0,t),this.call},q.prototype.Get=function(t,e){return void 0===e&&(e=null),this.call=this.request.send(g(this.endpoint+"/"+t,{includes:this.includes}),"GET",void 0,e),this.call},q.prototype.Limit=function(t){return this.limit=t,this},q.prototype.Offset=function(t){return this.offset=t,this},q.prototype.Sort=function(t){return this.sort=t,this},q.prototype.With=function(t){return t&&(this.includes=t.toString().toLowerCase()),this};var R=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Create=function(t){return this.request.send(""+this.endpoint,"POST",t)},e.prototype.Delete=function(t){return this.request.send(this.endpoint+"/"+t,"DELETE")},e.prototype.Update=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",e)},e}(q),k=function(t){function e(e){t.call(this,e),this.endpoint="products"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Filter=function(t){return this.filter=t,this},e.prototype.CreateRelationships=function(t,e,r){var n=y(e,r);return this.request.send(this.endpoint+"/"+t+"/relationships/"+C(e),"POST",n)},e.prototype.DeleteRelationships=function(t,e,r){var n=y(e,r);return this.request.send(this.endpoint+"/"+t+"/relationships/"+C(e),"DELETE",n)},e.prototype.UpdateRelationships=function(t,e,r){void 0===r&&(r=null);var n=y(e,r);return this.request.send(this.endpoint+"/"+t+"/relationships/"+C(e),"PUT",n)},e}(R),L=function(t){function e(e){t.call(this,e),this.endpoint="currencies",this.storage=new s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Create=function(t){return this.request.send(""+this.endpoint,"POST",t)},e.prototype.Delete=function(t){return this.request.send(this.endpoint+"/"+t,"DELETE")},e.prototype.Update=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",e)},e.prototype.Set=function(t){var e=this.config,r=this.storage;return r.set("mcurrency",t),e.currency=t,new Promise(function(t,e){var n=r.get("mcurrency");try{t(n)}catch(t){e(new Error(t))}})},e.prototype.Active=function(){var t=this.storage;return new Promise(function(e,r){var n=t.get("mcurrency");try{e(n)}catch(t){r(new Error(t))}})},e}(q),B=function(t){function e(e){t.call(this,e),this.endpoint="brands"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(R),D=function(t){function e(e,r){t.apply(this,arguments),this.request=e,this.cartId=r,this.endpoint="carts"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Get=function(){return this.request.send(this.endpoint+"/"+this.cartId,"GET")},e.prototype.Items=function(){return this.request.send(this.endpoint+"/"+this.cartId+"/items","GET")},e.prototype.AddProduct=function(t,e){void 0===e&&(e=1);var r=b(t,e);return this.request.send(this.endpoint+"/"+this.cartId+"/items","POST",r)},e.prototype.AddCustomItem=function(t){var e=Object.assign(t,{type:"custom_item"});return this.request.send(this.endpoint+"/"+this.cartId+"/items","POST",e)},e.prototype.AddPromotion=function(t){var e=b(t,null,"promotion_item");return this.request.send(this.endpoint+"/"+this.cartId+"/items","POST",e)},e.prototype.RemoveItem=function(t){return this.request.send(this.endpoint+"/"+this.cartId+"/items/"+t,"DELETE")},e.prototype.UpdateItemQuantity=function(t,e){var r=b(t,e);return this.request.send(this.endpoint+"/"+this.cartId+"/items/"+t,"PUT",r)},e.prototype.Checkout=function(t,e,r){void 0===r&&(r=e);var n,o,i=(o=n=t,"string"==typeof n&&(o={id:n}),{customer:o,billing_address:e,shipping_address:r});return this.request.send(this.endpoint+"/"+this.cartId+"/checkout","POST",i)},e.prototype.Delete=function(){return this.request.send(this.endpoint+"/"+this.cartId,"DELETE")},e}(q),N=function(t){function e(e){t.call(this,e),this.endpoint="categories"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Tree=function(){return this.request.send(this.endpoint+"/tree","GET")},e}(R),G=function(t){function e(e){t.call(this,e),this.endpoint="collections"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(R),F=function(t){function e(e){t.call(this,e),this.endpoint="orders"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Items=function(t){return this.request.send(this.endpoint+"/"+t+"/items","GET")},e.prototype.Payment=function(t,e){return this.request.send(this.endpoint+"/"+t+"/payments","POST",e)},e.prototype.Transactions=function(t){return this.request.send(this.endpoint+"/"+t+"/transactions","GET")},e}(q),M=function(t){function e(e){t.call(this,e),this.endpoint="gateways"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Update=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",e)},e.prototype.Enabled=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",{type:"gateway",enabled:e})},e}(q),z=function(t){function e(e){t.call(this,e),this.endpoint="customers"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Create=function(t){return this.request.send(""+this.endpoint,"POST",t)},e.prototype.Delete=function(t){return this.request.send(this.endpoint+"/"+t,"DELETE")},e.prototype.Token=function(t,e){var r={type:"token",email:t,password:e};return this.request.send(this.endpoint+"/tokens","POST",r)},e.prototype.Update=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",e)},e}(q),H=function(t){var e,r;this.config=t,this.cartId=(e=new s,r=d(),null!==e.get("mcart")?e.get("mcart"):(e.set("mcart",r),r)),this.request=new w(t),this.storage=new s,this.Products=new k(t),this.Currencies=new L(t),this.Brands=new B(t),this.Categories=new N(t),this.Collections=new G(t),this.Orders=new F(t),this.Gateways=new M(t),this.Customers=new z(t)};H.prototype.Cart=function(t){return void 0===t&&(t=this.cartId),new D(this.request,t)},H.prototype.Authenticate=function(){return this.request.authenticate()};t.default=H,t.gateway=function(t){return new H(new function(t){var e=t.application,r=t.client_id,n=t.client_secret,o=t.currency,i=t.host;this.application=e,this.client_id=r,this.client_secret=n,this.host=i||"api.moltin.com",this.protocol="https",this.version="v2",this.currency=o,this.auth={expires:3600,uri:"oauth/access_token"},this.sdk={version:"0.0.0-semantic-release",language:"JS"}}(t))},Object.defineProperty(t,"__esModule",{value:!0})});
